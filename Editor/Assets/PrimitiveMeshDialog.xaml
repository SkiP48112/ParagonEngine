<Window
    x:Class="Editor.Assets.PrimitiveMeshDialog"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:Editor.Assets"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:sys="clr-namespace:System;assembly=mscorlib"
    xmlns:utl="clr-namespace:Editor.Utilities.Controls"
    xmlns:ed="clr-namespace:Editor.Editors"
    Title="Primitive Mesh"
    Width="800"
    Height="600"
    Foreground="{StaticResource Editor.FontBrush}"
    ResizeMode="NoResize"
    Style="{StaticResource ParagonDialogStyle}"
    UseLayoutRounding="True"
    WindowStartupLocation="CenterScreen"
    mc:Ignorable="d">

    <Window.DataContext>
        <ed:GeometryEditor/>
    </Window.DataContext>
    
    <Window.Resources>
        <ObjectDataProvider
            x:Key="dataFromEnum"
            MethodName="GetValues"
            ObjectType="{x:Type sys:Enum}">
            <ObjectDataProvider.MethodParameters>
                <x:Type TypeName="local:PrimitiveMeshType" />
            </ObjectDataProvider.MethodParameters>
        </ObjectDataProvider>
    </Window.Resources>

    <DockPanel Background="{StaticResource Editor.Window.GrayBrush2}">
        <Border
            Height="32"
            Margin="0,0,0,1"
            VerticalAlignment="Top"
            Background="{StaticResource Editor.Window.GrayBrush3}"
            DockPanel.Dock="Top">

            <Border.Effect>
                <DropShadowEffect
                    BlurRadius="10"
                    Opacity="0.3"
                    ShadowDepth="0" />
            </Border.Effect>

            <StackPanel Margin="5,0" Orientation="Horizontal">
                <ComboBox
                    x:Name="primTypeComboBox"
                    Width="100"
                    VerticalAlignment="Center"
                    ItemsSource="{Binding Source={StaticResource dataFromEnum}}"
                    SelectedIndex="0"
                    SelectionChanged="OnPrimitiveTypeComboBox_SelectionChanged" />

                <CheckBox x:Name="textureCheckBox" Content="Show textured" VerticalAlignment="Center" Margin="5, 0"
                          IsChecked="True" Foreground="{StaticResource Editor.FontBrush}" Click="OnTextureComboBox_Click"/>
            </StackPanel>
        </Border>

        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition MinWidth="100" MaxWidth="200" />
                <ColumnDefinition />
            </Grid.ColumnDefinitions>

            <!--  PLANE SETTINGS  -->
            <StackPanel Background="{StaticResource Editor.Window.GrayBrush3}">
                <StackPanel.Style>
                    <Style TargetType="{x:Type StackPanel}">
                        <Setter Property="Visibility" Value="Collapsed" />
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding SelectedItem, ElementName=primTypeComboBox}" Value="{x:Static local:PrimitiveMeshType.Plane}">
                                <Setter Property="Visibility" Value="Visible" />
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </StackPanel.Style>

                <Grid Margin="0,5">
                    <Border
                        Margin="5"
                        BorderBrush="{StaticResource Editor.Window.GrayBrush6}"
                        BorderThickness="1"
                        CornerRadius="3">
                        <StackPanel Margin="5,15,5,5">
                            <DockPanel Margin="5">
                                <TextBlock
                                    Width="40"
                                    VerticalAlignment="Center"
                                    DockPanel.Dock="Left"
                                    Text="Width" />
                                <TextBox
                                    Width="30"
                                    DockPanel.Dock="Right"
                                    Text="{Binding Path=Value, ElementName=xSliderPlane}" />
                                <Slider
                                    x:Name="xSliderPlane"
                                    HorizontalAlignment="Stretch"
                                    Interval="1"
                                    IsSnapToTickEnabled="True"
                                    Maximum="10"
                                    Minimum="1"
                                    TickPlacement="BottomRight"
                                    ValueChanged="OnSlider_ValueChanged" />
                            </DockPanel>

                            <DockPanel Margin="5">
                                <TextBlock
                                    Width="40"
                                    VerticalAlignment="Center"
                                    DockPanel.Dock="Left"
                                    Text="Length" />
                                <TextBox
                                    Width="30"
                                    DockPanel.Dock="Right"
                                    Text="{Binding Path=Value, ElementName=zSliderPlane}" />
                                <Slider
                                    x:Name="zSliderPlane"
                                    HorizontalAlignment="Stretch"
                                    Interval="1"
                                    IsSnapToTickEnabled="True"
                                    Maximum="10"
                                    Minimum="1"
                                    TickPlacement="BottomRight"
                                    ValueChanged="OnSlider_ValueChanged" />
                            </DockPanel>
                        </StackPanel>
                    </Border>

                    <Label
                        Margin="20,-3,0,0"
                        Padding="5,0"
                        HorizontalAlignment="Left"
                        VerticalAlignment="Top"
                        Background="{StaticResource Editor.Window.GrayBrush3}"
                        Content="Segments"
                        Foreground="{StaticResource Editor.FontBrush}" />
                </Grid>

                <Grid Margin="0,5">
                    <Border
                        BorderBrush="{StaticResource Editor.Window.GrayBrush6}"
                        BorderThickness="1"
                        CornerRadius="1">
                        <StackPanel Margin="5,15,5,5">
                            <DockPanel Margin="5,5,5,0">
                                <TextBlock
                                    Width="40"
                                    VerticalAlignment="Center"
                                    DockPanel.Dock="Left"
                                    Text="Width" />
                                <utl:ScalarBox x:Name="widthScalarBoxPlane" Value="1" ValueChanged="OnScalarBox_ValueChanged"/>
                            </DockPanel>
                            <DockPanel Margin="5,5,5,0">
                                <TextBlock
                                    Width="40"
                                    VerticalAlignment="Center"
                                    DockPanel.Dock="Left"
                                    Text="Length" />
                                <utl:ScalarBox x:Name="lengthScalarBoxPlane" Value="1" ValueChanged="OnScalarBox_ValueChanged"/>
                            </DockPanel>
                        </StackPanel>
                    </Border>

                    <Label
                        Margin="20,-3,6,0"
                        Padding="5,0"
                        HorizontalAlignment="Left"
                        VerticalAlignment="Top"
                        Background="{StaticResource Editor.Window.GrayBrush3}"
                        Content="Size"
                        Foreground="{StaticResource Editor.FontBrush}" />
                </Grid>

                <Button Content="Save" Width="96" Margin="5, 0"/>

            </StackPanel>

            <!--  CUBE SETTINGS  -->

            <ed:GeometryView DataContext="{Binding MeshRenderer}" Grid.Column="1"/>
            <StackPanel Grid.Column="1" Margin="5" Orientation="Horizontal" VerticalAlignment="Top" HorizontalAlignment="Left" IsHitTestVisible="False">
                <TextBlock Text="{Binding MeshRenderer.CameraPosition.X, StringFormat=G5}"/>
                <TextBlock Text="{Binding MeshRenderer.CameraPosition.Y, StringFormat=G5}" Margin="10, 0"/>
                <TextBlock Text="{Binding MeshRenderer.CameraPosition.Z, StringFormat=G5}"/>
            </StackPanel>
        </Grid>
    </DockPanel>
</Window>
